# pg_hba.conf - Configuración de autenticación
# PostgreSQL 15 - Nodo Standby
# Proyecto: Sistema Alta Disponibilidad - Pollo Sanjuanero S.A.

# TIPO  BASE_DATOS    USUARIO           DIRECCIÓN         MÉTODO_AUTH

# Conexiones locales
local   all           postgres                            trust
local   all           all                                 md5

# Conexiones IPv4 locales:
host    all           postgres          127.0.0.1/32      trust
host    all           all               127.0.0.1/32      md5

# Conexiones IPv6 locales:
host    all           all               ::1/128           md5

# Permite conexiones desde cualquier host
host    all           all               0.0.0.0/0         md5

# CONFIGURACIÓN DE REPLICACIÓN
# Este nodo puede convertirse en primario después del failover
# Por lo tanto necesita configuración de replicación similar

# Permite conexiones de replicación desde usuarios replicator
host    replication   replicator        172.16.0.0/12     md5
local   replication   replicator                          md5
host    replication   replicator        127.0.0.1/32      md5
host    replication   replicator        ::1/128           md5
host    replication   replicator        0.0.0.0/0         md5

# Permite conexiones desde otros nodos
host    all           postgres          172.16.0.0/12     md5